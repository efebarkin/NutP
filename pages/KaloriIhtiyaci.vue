<template>
  <div
    class="min-h-screen bg-gradient-to-br from-emerald-50 via-teal-100 to-green-50 py-8 relative overflow-hidden"
  >
    <div class="container mx-auto px-4 py-12 relative z-10">
      <!-- Modern Header Section -->
      <div class="text-center mb-16 animate-fade-in-up">
        <div
          class="inline-block p-4 bg-emerald-500/10 backdrop-blur-md rounded-2xl mb-6 border border-emerald-200/30 shadow-2xl"
        >
          <div
            class="flex items-center justify-center w-16 h-16 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl shadow-lg"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-8 w-8 text-white"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"
              />
            </svg>
          </div>
        </div>

        <h1
          class="text-6xl font-bold bg-gradient-to-r from-emerald-700 via-teal-600 to-green-700 bg-clip-text text-transparent mb-6 leading-tight"
        >
          GÃ¼nlÃ¼k Kalori Ä°htiyacÄ± Hesaplama
        </h1>

        <div class="max-w-3xl mx-auto">
          <p
            class="text-xl text-gray-600 leading-relaxed mb-8"
          >
            SaÄŸlÄ±klÄ± bir yaÅŸam iÃ§in gÃ¼nlÃ¼k kalori
            ihtiyacÄ±nÄ±zÄ± hesaplayÄ±n. KiÅŸisel Ã¶zelliklerinize
            ve aktivite seviyenize gÃ¶re ne kadar kalori
            almanÄ±z gerektiÄŸini Ã¶ÄŸrenin.
          </p>

          <!-- Stats badges -->
          <div
            class="flex flex-wrap justify-center gap-4 mt-8"
          >
            <div
              class="bg-emerald-500/10 backdrop-blur-md rounded-xl px-6 py-3 border border-emerald-200/30 animate-float"
            >
              <div
                class="text-2xl font-bold text-emerald-700"
              >
                99%
              </div>
              <div class="text-sm text-gray-600">
                DoÄŸruluk
              </div>
            </div>
            <div
              class="bg-emerald-500/10 backdrop-blur-md rounded-xl px-6 py-3 border border-emerald-200/30 animate-float animation-delay-500"
            >
              <div
                class="text-2xl font-bold text-emerald-700"
              >
                2M+
              </div>
              <div class="text-sm text-gray-600">
                Hesaplama
              </div>
            </div>
            <div
              class="bg-emerald-500/10 backdrop-blur-md rounded-xl px-6 py-3 border border-emerald-200/30 animate-float animation-delay-1000"
            >
              <div
                class="text-2xl font-bold text-emerald-700"
              >
                24/7
              </div>
              <div class="text-sm text-gray-600">
                EriÅŸim
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-7xl mx-auto"
      >
        <!-- Enhanced Form Section -->
        <div class="group">
          <div
            class="bg-emerald-500/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-emerald-200/30 p-8 hover:bg-emerald-500/15 transition-all duration-500 hover:scale-[1.02] hover:shadow-3xl animate-slide-in-left"
          >
            <!-- Form header -->
            <div class="text-center mb-8">
              <div
                class="inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl mb-4 shadow-lg"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6 text-white"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"
                  />
                </svg>
              </div>
              <h2
                class="text-2xl font-bold text-emerald-700 mb-2"
              >
                Kalori Ä°htiyacÄ±nÄ±zÄ± HesaplayÄ±n
              </h2>
              <p class="text-gray-600">
                Verilerinizi girin ve kiÅŸiselleÅŸtirilmiÅŸ
                sonuÃ§larÄ±nÄ±zÄ± gÃ¶rÃ¼n
              </p>
            </div>

            <form
              @submit.prevent="calculateCalories"
              class="space-y-6"
            >
              <!-- Cinsiyet SeÃ§imi -->
              <div class="space-y-2">
                <label
                  class="text-lg font-medium text-gray-700"
                  >Cinsiyet</label
                >
                <div class="flex gap-4">
                  <button
                    type="button"
                    @click="formData.gender = 'male'"
                    :class="[
                      'flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-200',
                      formData.gender === 'male'
                        ? 'border-emerald-500 bg-emerald-50 text-emerald-700 shadow-sm'
                        : 'border-gray-200 hover:border-gray-300',
                    ]"
                  >
                    <span class="block text-center"
                      >Erkek</span
                    >
                  </button>
                  <button
                    type="button"
                    @click="formData.gender = 'female'"
                    :class="[
                      'flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-200',
                      formData.gender === 'female'
                        ? 'border-emerald-500 bg-emerald-50 text-emerald-700 shadow-sm'
                        : 'border-gray-200 hover:border-gray-300',
                    ]"
                  >
                    <span class="block text-center"
                      >KadÄ±n</span
                    >
                  </button>
                </div>
              </div>

              <!-- YaÅŸ Input -->
              <div class="space-y-2">
                <label
                  class="text-lg font-medium text-gray-700"
                  >YaÅŸ</label
                >
                <input
                  v-model.number="formData.age"
                  type="number"
                  min="0"
                  class="w-full px-4 py-3 rounded-xl border border-emerald-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 no-spinners"
                  required
                  placeholder="YaÅŸÄ±nÄ±zÄ± girin"
                />
              </div>

              <!-- Boy Input -->
              <div class="space-y-2">
                <label
                  class="text-lg font-medium text-gray-700"
                  >Boy (cm)</label
                >
                <input
                  v-model.number="formData.height"
                  type="number"
                  min="0"
                  class="w-full px-4 py-3 rounded-xl border border-emerald-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 no-spinners"
                  required
                  placeholder="Boyunuzu girin"
                />
              </div>

              <!-- Kilo Input -->
              <div class="space-y-2">
                <label
                  class="text-lg font-medium text-gray-700"
                  >Kilo (kg)</label
                >
                <input
                  v-model.number="formData.weight"
                  type="number"
                  min="0"
                  step="0.1"
                  class="w-full px-4 py-3 rounded-xl border border-emerald-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 no-spinners"
                  required
                  placeholder="Kilonuzu girin"
                />
              </div>

              <!-- Aktivite Seviyesi -->
              <div class="space-y-2">
                <label
                  class="text-lg font-medium text-gray-700"
                  >Aktivite Seviyesi</label
                >
                <select
                  v-model="formData.activityLevel"
                  class="w-full px-4 py-3 rounded-xl border border-emerald-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200"
                  required
                >
                  <option value="sedentary">
                    Hareketsiz (Masa baÅŸÄ± iÅŸ)
                  </option>
                  <option value="light">
                    Hafif Aktivite (Haftada 1-3 gÃ¼n
                    egzersiz)
                  </option>
                  <option value="moderate">
                    Orta Aktivite (Haftada 3-5 gÃ¼n egzersiz)
                  </option>
                  <option value="active">
                    Aktif (Haftada 6-7 gÃ¼n egzersiz)
                  </option>
                  <option value="very_active">
                    Ã‡ok Aktif (GÃ¼nde 2 kez egzersiz/fiziksel
                    iÅŸ)
                  </option>
                </select>
              </div>

              <!-- Hedef -->
              <div class="space-y-2">
                <label
                  class="text-lg font-medium text-gray-700"
                  >Hedefiniz</label
                >
                <select
                  v-model="formData.goal"
                  class="w-full px-4 py-3 rounded-xl border border-emerald-200 bg-white/70 backdrop-blur-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200"
                  required
                >
                  <option value="maintain">
                    Kilo Koruma
                  </option>
                  <option value="lose">Kilo Verme</option>
                  <option value="gain">Kilo Alma</option>
                </select>
              </div>

              <!-- Hesapla Butonu -->
              <button
                type="submit"
                class="w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-4 px-6 rounded-xl text-lg font-semibold hover:from-emerald-700 hover:to-teal-700 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-emerald-500/50 shadow-lg"
              >
                <span
                  class="flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6 mr-2"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"
                    />
                  </svg>
                  Kalori Ä°htiyacÄ±mÄ± Hesapla
                </span>
              </button>
            </form>
          </div>
        </div>

        <!-- SonuÃ§lar BÃ¶lÃ¼mÃ¼ -->
        <div
          v-if="results"
          class="space-y-6 animate-slide-in-right"
        >
          <!-- Kalori Ä°htiyacÄ± KartÄ± -->
          <div
            class="bg-emerald-500/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-emerald-200/30 p-8 hover:bg-emerald-500/15 transition-all duration-500 hover:scale-[1.02] hover:shadow-3xl group/result"
          >
            <h3
              class="text-xl font-semibold mb-4 flex items-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 mr-2 text-emerald-500"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                />
              </svg>
              GÃ¼nlÃ¼k Kalori Ä°htiyacÄ±nÄ±z
            </h3>
            <div
              class="flex items-center justify-between mb-4"
            >
              <span
                class="text-3xl font-bold text-emerald-600"
              >
                {{ Math.round(results.calories) }} kcal
              </span>
              <span
                class="text-lg font-medium px-3 py-1 rounded-full bg-emerald-100 text-emerald-700"
              >
                {{ getGoalText(formData.goal) }}
              </span>
            </div>
            <div
              class="w-full bg-gray-200 rounded-full h-2.5 mb-6"
            >
              <div
                class="h-2.5 bg-emerald-600 rounded-full transition-all duration-1000"
                :style="{
                  width: `${Math.min(
                    100,
                    (results.calories / 3000) * 100
                  )}%`,
                }"
              ></div>
            </div>
            <p class="text-gray-600 mb-4">
              Bu miktar,
              {{
                results.personalRecommendations.gender ===
                'male'
                  ? 'erkek'
                  : 'kadÄ±n'
              }}
              olarak
              {{ results.personalRecommendations.age }}
              yaÅŸÄ±nda,
              {{ results.personalRecommendations.weight }}
              kg aÄŸÄ±rlÄ±ÄŸÄ±nda ve
              {{
                getActivityLevelText(
                  results.personalRecommendations
                    .activityLevel
                )
              }}
              aktivite seviyesinde olmanÄ±za gÃ¶re
              hesaplanmÄ±ÅŸtÄ±r.
            </p>

            <!-- KiÅŸiselleÅŸtirilmiÅŸ Ã–neriler -->
            <div
              class="mt-4 p-4 bg-emerald-50 rounded-lg border border-emerald-100"
            >
              <h4
                class="font-semibold text-emerald-800 mb-2"
              >
                KiÅŸiselleÅŸtirilmiÅŸ Ã–neriler
              </h4>
              <ul class="space-y-2 text-gray-700">
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 mr-2 text-emerald-500 mt-0.5 flex-shrink-0"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <span
                    >GÃ¼nde en az
                    {{
                      results.personalRecommendations
                        .waterNeeded
                    }}
                    litre su iÃ§melisiniz.</span
                  >
                </li>
                <li
                  v-if="
                    results.personalRecommendations.goal !==
                    'maintain'
                  "
                  class="flex items-start"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 mr-2 text-emerald-500 mt-0.5 flex-shrink-0"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <span>
                    Bu kalori alÄ±mÄ± ile haftada yaklaÅŸÄ±k
                    {{
                      Math.abs(
                        results.personalRecommendations
                          .weeklyWeightChange
                      ).toFixed(1)
                    }}
                    kg
                    {{
                      results.personalRecommendations
                        .goal === 'lose'
                        ? 'verebilirsiniz'
                        : 'alabilirsiniz'
                    }}.
                  </span>
                </li>
                <li
                  v-if="
                    results.personalRecommendations
                      .targetTimeWeeks > 0
                  "
                  class="flex items-start"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 mr-2 text-emerald-500 mt-0.5 flex-shrink-0"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <span>
                    5 kg
                    {{
                      results.personalRecommendations
                        .goal === 'lose'
                        ? 'vermek'
                        : 'almak'
                    }}
                    iÃ§in yaklaÅŸÄ±k
                    {{
                      results.personalRecommendations
                        .targetTimeWeeks
                    }}
                    haftalÄ±k bir sÃ¼re hedefleyebilirsiniz.
                  </span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 mr-2 text-emerald-500 mt-0.5 flex-shrink-0"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <span>
                    {{
                      getPersonalizedActivityRecommendation()
                    }}
                  </span>
                </li>
              </ul>
            </div>

            <!-- Makro Besin DaÄŸÄ±lÄ±mÄ± -->
            <div class="mt-6">
              <h4 class="font-semibold text-gray-800 mb-3">
                Ã–nerilen Makro Besin DaÄŸÄ±lÄ±mÄ±
              </h4>
              <div class="grid grid-cols-3 gap-4">
                <div
                  class="p-3 bg-teal-50 rounded-lg border border-teal-100 text-center"
                >
                  <div
                    class="text-xl font-bold text-teal-700"
                  >
                    {{
                      Math.round(results.macros.protein)
                    }}g
                  </div>
                  <div class="text-sm text-gray-600">
                    Protein
                  </div>
                  <div class="text-xs text-gray-500">
                    {{
                      Math.round(
                        results.macros.proteinPercent
                      )
                    }}%
                  </div>
                </div>
                <div
                  class="p-3 bg-emerald-50 rounded-lg border border-emerald-100 text-center"
                >
                  <div
                    class="text-xl font-bold text-emerald-700"
                  >
                    {{ Math.round(results.macros.carbs) }}g
                  </div>
                  <div class="text-sm text-gray-600">
                    Karbonhidrat
                  </div>
                  <div class="text-xs text-gray-500">
                    {{
                      Math.round(
                        results.macros.carbsPercent
                      )
                    }}%
                  </div>
                </div>
                <div
                  class="p-3 bg-green-50 rounded-lg border border-green-100 text-center"
                >
                  <div
                    class="text-xl font-bold text-green-700"
                  >
                    {{ Math.round(results.macros.fat) }}g
                  </div>
                  <div class="text-sm text-gray-600">
                    YaÄŸ
                  </div>
                  <div class="text-xs text-gray-500">
                    {{
                      Math.round(results.macros.fatPercent)
                    }}%
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Beslenme Ã–nerileri -->
          <div
            class="bg-emerald-500/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-emerald-200/30 p-8 hover:bg-emerald-500/15 transition-all duration-500 hover:scale-[1.02] hover:shadow-3xl"
          >
            <h3
              class="text-xl font-semibold mb-4 flex items-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 mr-2 text-emerald-500"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 10V3L4 14h7v7l9-11h-7z"
                />
              </svg>
              Beslenme Ã–nerileri
            </h3>

            <div class="space-y-4 mt-4">
              <div
                class="p-4 bg-emerald-50 rounded-lg border border-emerald-100 transition-all duration-300 hover:shadow-md"
              >
                <h4
                  class="font-semibold text-emerald-800 mb-2"
                >
                  {{ getGoalBasedNutritionTitle() }}
                </h4>
                <ul class="space-y-2 text-gray-700">
                  <li
                    v-for="(
                      tip, index
                    ) in getGoalBasedNutritionTips()"
                    :key="index"
                    class="flex items-start"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-5 w-5 mr-2 text-emerald-500 mt-0.5 flex-shrink-0"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                      />
                    </svg>
                    <span>{{ tip }}</span>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-teal-50 rounded-lg border border-teal-100 transition-all duration-300 hover:shadow-md"
              >
                <h4
                  class="font-semibold text-teal-800 mb-2"
                >
                  SaÄŸlÄ±klÄ± Karbonhidratlar
                </h4>
                <ul
                  class="grid grid-cols-2 gap-2 text-gray-700"
                >
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-teal-500 rounded-full mr-2"
                    ></div>
                    <span>Tam tahÄ±llÄ± ekmek</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-teal-500 rounded-full mr-2"
                    ></div>
                    <span>Yulaf</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-teal-500 rounded-full mr-2"
                    ></div>
                    <span>Kahverengi pirinÃ§</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-teal-500 rounded-full mr-2"
                    ></div>
                    <span>TatlÄ± patates</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-teal-500 rounded-full mr-2"
                    ></div>
                    <span>Meyve</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-teal-500 rounded-full mr-2"
                    ></div>
                    <span>Baklagiller</span>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-green-50 rounded-lg border border-green-100 transition-all duration-300 hover:shadow-md"
              >
                <h4
                  class="font-semibold text-green-800 mb-2"
                >
                  SaÄŸlÄ±klÄ± YaÄŸlar
                </h4>
                <ul
                  class="grid grid-cols-2 gap-2 text-gray-700"
                >
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-green-500 rounded-full mr-2"
                    ></div>
                    <span>ZeytinyaÄŸÄ±</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-green-500 rounded-full mr-2"
                    ></div>
                    <span>Avokado</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-green-500 rounded-full mr-2"
                    ></div>
                    <span>KuruyemiÅŸler</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-green-500 rounded-full mr-2"
                    ></div>
                    <span>Tohumlar</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-green-500 rounded-full mr-2"
                    ></div>
                    <span>Somon</span>
                  </li>
                  <li class="flex items-center">
                    <div
                      class="w-2 h-2 bg-green-500 rounded-full mr-2"
                    ></div>
                    <span>Keten tohumu</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Bilgilendirici BÃ¶lÃ¼m (SonuÃ§lar yoksa) -->
        <div
          v-else
          class="bg-emerald-500/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-emerald-200/30 p-8 hover:bg-emerald-500/15 transition-all duration-500 hover:scale-[1.02] hover:shadow-3xl animate-slide-in-right group/info"
        >
          <!-- Info Header -->
          <div class="text-center mb-8">
            <div
              class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-2xl mb-4 shadow-xl group-hover/info:scale-110 transition-transform duration-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-8 w-8 text-white"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            </div>
            <h3
              class="text-3xl font-bold text-emerald-700 mb-2"
            >
              Kalori Ä°htiyacÄ± Neden Ã–nemli?
            </h3>
            <div
              class="w-16 h-1 bg-gradient-to-r from-emerald-400 to-teal-500 rounded-full mx-auto"
            ></div>
          </div>

          <!-- Info Content -->
          <div class="space-y-6">
            <!-- Info Explanation -->
            <div
              class="bg-emerald-50/60 backdrop-blur-sm rounded-2xl p-6 border border-emerald-200/30"
            >
              <p
                class="text-gray-700 leading-relaxed text-lg mb-4"
              >
                GÃ¼nlÃ¼k kalori ihtiyacÄ±nÄ±zÄ± bilmek, saÄŸlÄ±klÄ±
                bir vÃ¼cut aÄŸÄ±rlÄ±ÄŸÄ± korumak veya
                hedeflerinize ulaÅŸmak iÃ§in Ã§ok Ã¶nemlidir.
                Kalori ihtiyacÄ±nÄ±z:
              </p>

              <!-- Importance Points -->
              <div class="space-y-4">
                <div
                  class="group/tip bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-emerald-200/30 hover:bg-white/80 transition-all duration-300 hover:scale-[1.02] animate-slide-in-up"
                >
                  <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                      <div
                        class="w-8 h-8 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center shadow-lg group-hover/tip:scale-110 transition-transform duration-300"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-4 w-4 text-white"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M5 13l4 4L19 7"
                          />
                        </svg>
                      </div>
                    </div>
                    <div class="flex-1">
                      <p
                        class="text-gray-700 leading-relaxed group-hover/tip:text-gray-800 transition-colors duration-300"
                      >
                        VÃ¼cut fonksiyonlarÄ±nÄ±zÄ± sÃ¼rdÃ¼rmek
                        iÃ§in gereken enerjiyi saÄŸlar
                      </p>
                    </div>
                  </div>
                </div>

                <div
                  class="group/tip bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-emerald-200/30 hover:bg-white/80 transition-all duration-300 hover:scale-[1.02] animate-slide-in-up"
                  style="animation-delay: 100ms"
                >
                  <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                      <div
                        class="w-8 h-8 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center shadow-lg group-hover/tip:scale-110 transition-transform duration-300"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-4 w-4 text-white"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M5 13l4 4L19 7"
                          />
                        </svg>
                      </div>
                    </div>
                    <div class="flex-1">
                      <p
                        class="text-gray-700 leading-relaxed group-hover/tip:text-gray-800 transition-colors duration-300"
                      >
                        Kilo kontrolÃ¼ iÃ§in temel oluÅŸturur
                      </p>
                    </div>
                  </div>
                </div>

                <div
                  class="group/tip bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-emerald-200/30 hover:bg-white/80 transition-all duration-300 hover:scale-[1.02] animate-slide-in-up"
                  style="animation-delay: 200ms"
                >
                  <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                      <div
                        class="w-8 h-8 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center shadow-lg group-hover/tip:scale-110 transition-transform duration-300"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-4 w-4 text-white"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M5 13l4 4L19 7"
                          />
                        </svg>
                      </div>
                    </div>
                    <div class="flex-1">
                      <p
                        class="text-gray-700 leading-relaxed group-hover/tip:text-gray-800 transition-colors duration-300"
                      >
                        Fiziksel aktiviteleriniz iÃ§in
                        gereken enerjiyi belirler
                      </p>
                    </div>
                  </div>
                </div>

                <div
                  class="group/tip bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-emerald-200/30 hover:bg-white/80 transition-all duration-300 hover:scale-[1.02] animate-slide-in-up"
                  style="animation-delay: 300ms"
                >
                  <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                      <div
                        class="w-8 h-8 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center shadow-lg group-hover/tip:scale-110 transition-transform duration-300"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-4 w-4 text-white"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M5 13l4 4L19 7"
                          />
                        </svg>
                      </div>
                    </div>
                    <div class="flex-1">
                      <p
                        class="text-gray-700 leading-relaxed group-hover/tip:text-gray-800 transition-colors duration-300"
                      >
                        Kas kÃ¼tlesi korumanÄ±za veya
                        artÄ±rmanÄ±za yardÄ±mcÄ± olur
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Call to Action -->
              <div class="mt-8 text-center">
                <div
                  class="bg-gradient-to-r from-emerald-500/20 to-teal-500/20 backdrop-blur-sm rounded-2xl p-6 border border-emerald-200/30"
                >
                  <p class="text-gray-700 text-sm mb-4">
                    ğŸ’¡
                    <strong>BaÅŸlamak iÃ§in:</strong> KiÅŸisel
                    bilgilerinizi girin ve gÃ¼nlÃ¼k kalori
                    ihtiyacÄ±nÄ±zÄ± hesaplayÄ±n. SaÄŸlÄ±klÄ± bir
                    yaÅŸam iÃ§in doÄŸru beslenme Ã§ok Ã¶nemlidir.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';

// Form verileri
const formData = ref({
  gender: 'male',
  age: null,
  weight: null,
  height: null,
  activityLevel: 'moderate',
  goal: 'maintain',
});

// SonuÃ§lar
const results = ref(null);
const isInitialRender = ref(true);

// Component mounted hook to prevent double rendering
onMounted(() => {
  // Set a small timeout to ensure the component is fully mounted
  setTimeout(() => {
    isInitialRender.value = false;
  }, 100);
});

// Kalori ihtiyacÄ±nÄ± hesapla
const calculateCalories = () => {
  // Prevent calculation during initial render
  if (isInitialRender.value) return;
  // BMR (Bazal Metabolizma HÄ±zÄ±) hesaplama - Mifflin-St Jeor Denklemi
  let bmr;
  if (formData.value.gender === 'male') {
    bmr =
      10 * formData.value.weight +
      6.25 * formData.value.height -
      5 * formData.value.age +
      5;
  } else {
    bmr =
      10 * formData.value.weight +
      6.25 * formData.value.height -
      5 * formData.value.age -
      161;
  }

  // Aktivite faktÃ¶rÃ¼
  let activityFactor;
  switch (formData.value.activityLevel) {
    case 'sedentary':
      activityFactor = 1.2;
      break;
    case 'light':
      activityFactor = 1.375;
      break;
    case 'moderate':
      activityFactor = 1.55;
      break;
    case 'active':
      activityFactor = 1.725;
      break;
    case 'very_active':
      activityFactor = 1.9;
      break;
    default:
      activityFactor = 1.55;
  }

  // TDEE (Toplam GÃ¼nlÃ¼k Enerji HarcamasÄ±)
  let tdee = bmr * activityFactor;

  // Hedef bazlÄ± kalori ayarlamasÄ±
  let targetCalories;
  let calorieAdjustment = 0;

  switch (formData.value.goal) {
    case 'lose':
      calorieAdjustment = -500; // Kilo vermek iÃ§in gÃ¼nlÃ¼k 500 kalori aÃ§Ä±k
      targetCalories = tdee + calorieAdjustment;
      break;
    case 'gain':
      calorieAdjustment = 500; // Kilo almak iÃ§in gÃ¼nlÃ¼k 500 kalori fazla
      targetCalories = tdee + calorieAdjustment;
      break;
    default:
      targetCalories = tdee; // Kilo korumak iÃ§in
  }

  // Makro besin hesaplamalarÄ±
  // Protein: VÃ¼cut aÄŸÄ±rlÄ±ÄŸÄ± baÅŸÄ±na 1.6-2.2g (ortalama 1.8g)
  // YaÄŸ: Toplam kalorinin %25-35'i (ortalama %30)
  // Karbonhidrat: Kalan kaloriler

  const proteinGrams = formData.value.weight * 1.8;
  const proteinCalories = proteinGrams * 4; // 1g protein = 4 kalori

  const fatCalories = targetCalories * 0.3;
  const fatGrams = fatCalories / 9; // 1g yaÄŸ = 9 kalori

  const carbsCalories =
    targetCalories - proteinCalories - fatCalories;
  const carbsGrams = carbsCalories / 4; // 1g karbonhidrat = 4 kalori

  // KiÅŸiselleÅŸtirilmiÅŸ Ã¶neriler iÃ§in ek hesaplamalar
  const waterNeeded =
    Math.round(formData.value.weight * 0.033 * 10) / 10; // GÃ¼nlÃ¼k su ihtiyacÄ± (L)

  // HaftalÄ±k kilo deÄŸiÅŸimi tahmini
  const weeklyWeightChange =
    calorieAdjustment !== 0
      ? (calorieAdjustment * 7) / 7700
      : 0; // 7700 kalori = 1 kg yaÄŸ

  // Hedef sÃ¼re (hafta) - EÄŸer kilo verme/alma hedefi varsa
  let targetTimeWeeks = 0;
  if (formData.value.goal !== 'maintain') {
    // SaÄŸlÄ±klÄ± kilo deÄŸiÅŸimi haftada 0.5-1 kg arasÄ± olmalÄ±
    // Hedef olarak 5 kg deÄŸiÅŸim iÃ§in sÃ¼re hesaplama
    targetTimeWeeks = Math.round(
      5 / Math.abs(weeklyWeightChange)
    );
  }

  // SonuÃ§larÄ± gÃ¼ncelle
  results.value = {
    calories: targetCalories,
    bmr: bmr,
    tdee: tdee,
    macros: {
      protein: proteinGrams,
      fat: fatGrams,
      carbs: carbsGrams,
      proteinPercent:
        (proteinCalories / targetCalories) * 100,
      fatPercent: (fatCalories / targetCalories) * 100,
      carbsPercent: (carbsCalories / targetCalories) * 100,
    },
    personalRecommendations: {
      waterNeeded: waterNeeded,
      weeklyWeightChange: weeklyWeightChange,
      targetTimeWeeks: targetTimeWeeks,
      activityLevel: formData.value.activityLevel,
      gender: formData.value.gender,
      age: formData.value.age,
      weight: formData.value.weight,
      goal: formData.value.goal,
    },
  };

  // SayfayÄ± sonuÃ§lara doÄŸru kaydÄ±r
  setTimeout(() => {
    window.scrollTo({
      top: 300,
      behavior: 'smooth',
    });
  }, 100);
};

// Hedef metni
const getGoalText = goal => {
  switch (goal) {
    case 'lose':
      return 'Kilo Verme';
    case 'gain':
      return 'Kilo Alma';
    default:
      return 'Kilo Koruma';
  }
};

// Aktivite seviyesi metni
const getActivityLevelText = level => {
  switch (level) {
    case 'sedentary':
      return 'hareketsiz';
    case 'light':
      return 'hafif aktif';
    case 'moderate':
      return 'orta aktif';
    case 'active':
      return 'aktif';
    case 'very_active':
      return 'Ã§ok aktif';
    default:
      return 'orta aktif';
  }
};

// KiÅŸiselleÅŸtirilmiÅŸ aktivite Ã¶nerisi
const getPersonalizedActivityRecommendation = () => {
  const goal = results.value.personalRecommendations.goal;
  const activityLevel =
    results.value.personalRecommendations.activityLevel;

  if (goal === 'lose') {
    if (
      activityLevel === 'sedentary' ||
      activityLevel === 'light'
    ) {
      return 'Haftada en az 3-4 gÃ¼n, 30-45 dakika kardiyovaskÃ¼ler egzersiz yapmanÄ±z Ã¶nerilir.';
    } else if (activityLevel === 'moderate') {
      return 'Mevcut aktivite seviyenizi koruyun ve haftada 2-3 kez direnÃ§ egzersizleri ekleyin.';
    } else {
      return 'YÃ¼ksek aktivite seviyenizi koruyun, ancak aÅŸÄ±rÄ± egzersizden kaÃ§Ä±nÄ±n ve yeterli dinlenme saÄŸlayÄ±n.';
    }
  } else if (goal === 'gain') {
    return 'Kas kÃ¼tlesi kazanmak iÃ§in haftada 3-4 kez direnÃ§ egzersizleri yapmanÄ±z ve protein alÄ±mÄ±nÄ±za dikkat etmeniz Ã¶nerilir.';
  } else {
    if (activityLevel === 'sedentary') {
      return 'SaÄŸlÄ±ÄŸÄ±nÄ±zÄ± korumak iÃ§in gÃ¼nlÃ¼k aktivitenizi artÄ±rÄ±n, haftada en az 150 dakika orta yoÄŸunlukta egzersiz yapÄ±n.';
    } else {
      return 'Mevcut aktivite seviyenizi koruyun ve dÃ¼zenli olarak farklÄ± egzersiz tÃ¼rleri deneyin.';
    }
  }
};

// Hedef bazlÄ± beslenme baÅŸlÄ±ÄŸÄ±
const getGoalBasedNutritionTitle = () => {
  const goal = results.value.personalRecommendations.goal;

  if (goal === 'lose') {
    return 'SaÄŸlÄ±klÄ± Kilo Vermek Ä°Ã§in Beslenme Ã–nerileri';
  } else if (goal === 'gain') {
    return 'SaÄŸlÄ±klÄ± Kilo Almak Ä°Ã§in Beslenme Ã–nerileri';
  } else {
    return 'SaÄŸlÄ±klÄ± Kilonuzu Korumak Ä°Ã§in Beslenme Ã–nerileri';
  }
};

// Hedef bazlÄ± beslenme Ã¶nerileri
const getGoalBasedNutritionTips = () => {
  const goal = results.value.personalRecommendations.goal;
  const gender =
    results.value.personalRecommendations.gender;
  const calories = Math.round(results.value.calories);

  if (goal === 'lose') {
    return [
      `GÃ¼nlÃ¼k ${calories} kalori hedefini aÅŸmamaya dikkat edin`,
      'Ã–ÄŸÃ¼nlerinizde protein miktarÄ±nÄ± artÄ±rÄ±n (tokluk hissi saÄŸlar)',
      'Sebze ve meyve tÃ¼ketimini artÄ±rÄ±n (dÃ¼ÅŸÃ¼k kalorili, yÃ¼ksek lifli)',
      'Åeker ve iÅŸlenmiÅŸ gÄ±dalarÄ± diyetinizden Ã§Ä±karÄ±n',
      'Ã–ÄŸÃ¼n atlamamaya Ã¶zen gÃ¶sterin, aÃ§lÄ±k hissini Ã¶nleyin',
      'Yemeklerinizi daha kÃ¼Ã§Ã¼k tabaklarda servis edin',
      gender === 'female'
        ? 'KadÄ±nlar iÃ§in gÃ¼nlÃ¼k 1200 kalorinin altÄ±na dÃ¼ÅŸmeyin'
        : 'Erkekler iÃ§in gÃ¼nlÃ¼k 1500 kalorinin altÄ±na dÃ¼ÅŸmeyin',
    ];
  } else if (goal === 'gain') {
    return [
      `GÃ¼nlÃ¼k ${calories} kalori hedefine ulaÅŸmak iÃ§in Ã¶ÄŸÃ¼n sayÄ±nÄ±zÄ± artÄ±rÄ±n`,
      'Protein alÄ±mÄ±nÄ±zÄ± artÄ±rÄ±n (kas yapÄ±mÄ± iÃ§in gerekli)',
      'SaÄŸlÄ±klÄ± yaÄŸlar tÃ¼ketin (zeytinyaÄŸÄ±, avokado, kuruyemiÅŸler)',
      'Kompleks karbonhidratlarÄ± tercih edin (yulaf, kahverengi pirinÃ§, tam tahÄ±llar)',
      'Egzersiz sonrasÄ± protein ve karbonhidrat iÃ§eren bir Ã¶ÄŸÃ¼n tÃ¼ketin',
      'Gece yatmadan Ã¶nce protein iÃ§eren bir atÄ±ÅŸtÄ±rmalÄ±k tÃ¼ketin',
      'Kalori yoÄŸun ancak saÄŸlÄ±klÄ± besinleri tercih edin (kuruyemiÅŸler, avokado, hindistan cevizi)',
    ];
  } else {
    return [
      `GÃ¼nlÃ¼k ${calories} kalori hedefini dengeli bir ÅŸekilde daÄŸÄ±tÄ±n`,
      'Ã–ÄŸÃ¼nlerinizde protein, karbonhidrat ve saÄŸlÄ±klÄ± yaÄŸlarÄ± dengeli tÃ¼ketin',
      'GÃ¼nde en az 5 porsiyon sebze ve meyve tÃ¼ketin',
      'Ä°ÅŸlenmiÅŸ gÄ±dalar yerine tam gÄ±dalarÄ± tercih edin',
      'DÃ¼zenli Ã¶ÄŸÃ¼n saatleri belirleyin',
      'Porsiyon kontrolÃ¼ne dikkat edin',
      'Su tÃ¼ketimini ihmal etmeyin',
    ];
  }
};
</script>

<style scoped>
/* Sadece bu sayfaya Ã¶zel CSS'ler burada kalacak */
/* Ortak animasyonlar ve stiller calculator-animations.css dosyasÄ±na taÅŸÄ±ndÄ± */
</style>
